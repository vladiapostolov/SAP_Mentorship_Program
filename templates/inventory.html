{% extends "layout.html" %}
{% set title = "Inventory" %}
{% block content %}
<div class="dashboard-header">
    <h1>ğŸ“¦ Inventory Management</h1>
    <p>Track and manage your drone parts and equipment</p>
</div>

<div class="card">
    <p><a href="{{ url_for('scan.scan') }}" class="btn btn-primary">ğŸ“· Scan QR Code</a></p>
</div>

<div class="inventory-table">
    <table>
        <thead>
            <tr>
                <th>ğŸ“¦ Name</th>
                <th>ğŸ·ï¸ Type</th>
                <th>ğŸ”¢ Quantity</th>
                <th>ğŸ“‰ Min Qty</th>
                <th>âš ï¸ Status</th>
                <th>ğŸ“± QR Code</th>
                <th>ğŸ“¥ Last IN</th>
                <th>ğŸ“¤ Last OUT</th>
            </tr>
        </thead>
        <tbody>
            {% for it in items %}
            <tr>
                <td>{{ it.name }}</td>
                <td>{{ it.type }}</td>
                <td>{{ it.quantity }}</td>
                <td>{{ it.min_quantity }}</td>
                <td>{% if it.is_low_stock %}âš ï¸ Low Stock{% else %}âœ… OK{% endif %}</td>
                <td>{{ it.qr_code or "â€”" }}</td>
                <td>{{ it.last_in_ts or "â€”" }}</td>
                <td>{{ it.last_out_ts or "â€”" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="add-item-form">
    <h3>â• Add New Item</h3>
    <form method="post" action="{{ url_for('inventory.inventory_add') }}">
        <div class="form-row">
            <div class="form-group">
                <label for="name">ğŸ“¦ Item Name</label>
                <input name="name" id="name" placeholder="Enter item name" required>
            </div>
            <div class="form-group">
                <label for="type">ğŸ·ï¸ Item Type</label>
                <select name="type" id="type" required>
                    {% for t in allowed_types %}
                        <option value="{{ t }}">{{ t }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="description">ğŸ“ Description</label>
            <textarea name="description" id="description" placeholder="Optional description"></textarea>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label for="quantity">ğŸ”¢ Initial Quantity</label>
                <input name="quantity" id="quantity" type="number" value="0" min="0" required>
            </div>
            <div class="form-group">
                <label for="qr_code">ğŸ“± QR Code</label>
                <input name="qr_code" id="qr_code" placeholder="Unique QR code content" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">ğŸš€ Add Item</button>
    </form>
</div>
{% endblock %}
